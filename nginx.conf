
server {
  listen 80;
  server_name dev.curatedcodes.in www.dev.curatedcodes.in;

  location /.well-known/acme-challenge/ {
    root /var/www/certbot;
  }

  location / {
    return 301 https://$host$request_uri;
  }
}

# HTTPS Secure Server
server {
  listen 443 ssl;
  server_name dev.curatedcodes.in www.dev.curatedcodes.in;

  ssl_certificate /etc/letsencrypt/live/dev.curatedcodes.in/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/dev.curatedcodes.in/privkey.pem;
  ssl_protocols TLSv1.2 TLSv1.3;
  ssl_ciphers HIGH:!aNULL:!MD5;

  location = /config.json {
    root /usr/share/nginx/html;
    add_header Cache-Control "no-store, no-cache, must-revalidate";
    add_header Pragma "no-cache";
    add_header Expires "0";
    sendfile off;
    tcp_nopush off;
    tcp_nodelay on;
    try_files /config.json =404;
  }

  location = /login-text.json {
    root /usr/share/nginx/html;
    add_header Cache-Control "no-store, no-cache, must-revalidate";
    add_header Pragma "no-cache";
    add_header Expires "0";
    sendfile off;
    tcp_nopush off;
    tcp_nodelay on;
    try_files /login-text.json =404;
  }

  location /images/ {
    alias /usr/share/nginx/html/images/;
    add_header Cache-Control "no-store, no-cache, must-revalidate";
  }

  location / {
    root /usr/share/nginx/html;
    index index.html;
    try_files $uri /index.html;
  }
}
